# Choreo Component Configuration for Cinema Management System
# Schema Version 1.2
schemaVersion: "1.2"

# Build configuration - MUST use Dockerfile to avoid buildpack Java version issues
buildConfig:
  type: docker
  dockerfile: Dockerfile
  context: .

# Incoming connection details for the component
endpoints:
  # Backend REST API Endpoint
  - name: cinema-backend-api
    displayName: Cinema Management Backend API
    service:
      basePath: /
      port: 8081
    type: REST
    networkVisibilities:
      - Public

# Runtime configurations
configurations:
  # Environment variables - All values should be configured in Choreo Console
  env:
    # MongoDB Configuration
    - name: MONGODB_URI
      value: ${MONGODB_URI}

    - name: MONGODB_DATABASE
      value: cinema_db

    # Server Configuration
    - name: SERVER_PORT
      value: "8081"

    # JWT Configuration
    - name: JWT_SECRET
      value: ${JWT_SECRET}

    - name: JWT_EXPIRATION
      value: "86400000"

    # CORS Configuration
    - name: APP_CORS_ALLOWED_ORIGINS
      value: ${APP_CORS_ALLOWED_ORIGINS}

    # Mail Configuration
    - name: MAIL_HOST
      value: smtp.gmail.com

    - name: MAIL_PORT
      value: "587"

    - name: MAIL_USERNAME
      value: ${MAIL_USERNAME}

    - name: MAIL_PASSWORD
      value: ${MAIL_PASSWORD}

    # Stripe Payment Configuration
    - name: STRIPE_API_KEY
      value: ${STRIPE_API_KEY}

    - name: STRIPE_PUBLIC_KEY
      value: ${STRIPE_PUBLIC_KEY}

    - name: STRIPE_WEBHOOK_SECRET
      value: ${STRIPE_WEBHOOK_SECRET}

    # Application Configuration
    - name: ADMIN_EMAIL
      value: admin@cinema.com

    - name: ADMIN_PASSWORD
      value: ${ADMIN_PASSWORD}

    - name: USER_WELCOME_BONUS
      value: "100"
